<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.1.1//EN" "http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">

<xwork>
  <include file="webwork-default.xml"/>
  <package name="default" extends="webwork-default">

    <interceptors>
      <interceptor name="exception-logging" class="exceptionLogging"/>
      <interceptor name="user" class="userInterceptor"/>
      <interceptor-stack name="defaultContinuumStack">
        <interceptor-ref name="user"/>
        <interceptor-ref name="exception-logging"/>
        <!--<interceptor-ref name="defaultStack"/>-->


        <interceptor-ref name="prepare"/>
        <interceptor-ref name="servlet-config"/>
        <interceptor-ref name="chain"/>
        <interceptor-ref name="model-driven"/>
        <interceptor-ref name="component"/>
        <interceptor-ref name="fileUpload"/>
        <interceptor-ref name="static-params"/>
        <interceptor-ref name="params"/>
        <!-- interceptor-ref name="conversionError"/ -->
       <interceptor-ref name="validation"/>
        <interceptor-ref name="workflow"/>
      </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="defaultContinuumStack"/>

    <global-results>
      <result name="error">/error.jsp</result>
      <result name="internalError" type="redirect">/error.jsp</result>
      <result name="continuumInitialization" type="redirect">/configuration!input.action</result>
    </global-results>

    <global-exception-mappings>
      <exception-mapping exception="org.apache.maven.continuum.initialization.ContinuumInitializationException" result="continuumInitialization"/>
      <exception-mapping exception="java.lang.Exception" result="internalError"/>
    </global-exception-mappings>

    <action name="checkConfiguration" class="checkConfiguration">
      <result name="input">/redirectToContinuumInitialization.jsp</result>
    </action>

    <action name="configuration" class="configuration">
      <result name="input">configurationEdit.jsp</result>
      <result name="success">configuration.jsp</result>
    </action>

    <action name="companyInfo" class="configuration">
      <result name="success">/components/companyLogo.jsp</result>
    </action>


    <action name="summary" class="summary">
      <result name="success">summary.jsp</result>
    </action>

    <action name="groupSummary" class="groupSummary">
      <result name="success">groupSummary.jsp</result>
    </action>

    <action name="addMavenTwoProject" class="addMavenTwoProject">
      <result name="input">addMavenTwoProject.jsp</result>
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="addMavenOneProject" class="addMavenOneProject">
      <result name="input">addMavenOneProject.jsp</result>
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="addProject" class="addProject">
      <result name="input">addProject.jsp</result>
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="deleteProject" class="deleteProject">
      <result name="delete">deleteProject.jsp</result>
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="buildProject" class="buildProject">
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="projectView" class="projectView">
      <result name="success">projectView.jsp</result>
    </action>

    <action name="projectEdit" class="projectEdit">
      <result name="input">projectEdit.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="projectSave" class="projectEdit">
      <result name="input">projectEdit.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <!--
    * Session Influencing actions
    -->
    <action name="login" class="session" method="login">
      <result name="input">login.jsp</result>
      <result name="error">login.jsp</result>
      <result name="success" type="chain">groupSummary</result>
    </action>

    <action name="logout" class="session" method="logout">
      <result name="success" type="chain">groupSummary</result>
    </action>


    <!--
    * user management actions
    -->
    <action name="users" class="userManagement" method="summary">
      <result name="success">users.jsp</result>
    </action>

    <action name="user" class="userManagement" method="input">
      <result name="success">user.jsp</result>
    </action>

    <action name="saveUser" class="userManagement" method="save">
      <result name="success" type="chain">users</result>
    </action>

    <action name="removeUser" class="userManagement" method="remove">
      <result name="success" type="chain">users</result>
    </action>

    <!--
    * user group management actions
    -->
    <action name="userGroups" class="userGroupManagement" method="summary">
      <result name="success">userGroups.jsp</result>
    </action>

    <action name="userGroup" class="userGroupManagement" method="input">
      <result name="success">userGroup.jsp</result>
    </action>

    <action name="saveUserGroup" class="userGroupManagement" method="save">
      <result name="success" type="chain">userGroups</result>
    </action>

    <action name="removeUserGroup" class="userGroupManagement" method="remove">
      <result name="success" type="chain">userGroups</result>
    </action>

    <!--
    * build definition actions
    -->
    <action name="buildDefinition" class="buildDefinition">
      <result name="input">buildDefinitionEdit.jsp</result>
    </action>

    <action name="saveProjectBuildDefinition" class="buildDefinition" method="saveToProject">
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="removeProjectBuildDefinition" class="buildDefinition" method="removeFromProject">
      <result name="confirm">deleteBuildDefinition.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="saveGroupBuildDefinition" class="buildDefinition" method="saveToGroup">
      <result name="success" type="chain">projectGroupView</result>
    </action>

    <action name="removeGroupBuildDefinition" class="buildDefinition" method="removeFromGroup">
      <result name="confirm">deleteBuildDefinition.jsp</result>
      <result name="success" type="chain">projectGroupView</result>
    </action>


    <!--
    * project group actions
    -->
    <action name="projectGroupMembers" class="projectGroup" method="members">
      <result name="success">projectGroupMembers.jsp</result>
    </action>

    <action name="projectGroupSummary" class="projectGroup" method="summary">
      <result name="success">projectGroupSummary.jsp</result>
    </action>

    <action name="projectGroupBuildDefinition" class="projectGroup" method="buildDefinitions">
      <result name="success">projectGroupBuildDefinition.jsp</result>
    </action>

    <action name="projectGroupNotifier" class="projectGroup" method="notifiers">
      <result name="success">projectGroupNotifier.jsp</result>
    </action>

    <action name="buildProjectGroup" class="projectGroup" method="build">
      <result name="success" type="chain">projectGroupSummary</result>
    </action>

    <action name="removeProjectGroup" class="projectGroup" method="remove">
      <result name="success" type="chain">groupSummary</result>
    </action>

    <!--
    * notifier actions
    -->
    <action name="deleteNotifier" class="deleteNotifier">
      <result name="delete">deleteNotifier.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="addNotifier" class="addNotifier">
      <result name="input">notifierSelectType.jsp</result>
      <result name="mail_input">notifierMail.jsp</result>
      <result name="irc_input">notifierIrc.jsp</result>
      <result name="msn_input">notifierMsn.jsp</result>
      <result name="jabber_input">notifierJabber.jsp</result>
    </action>

    <action name="mailNotifierEdit" class="mailNotifierEdit">
      <result name="input">notifierMail.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="mailNotifierSave" class="mailNotifierEdit">
      <result name="input">notifierMail.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="ircNotifierEdit" class="ircNotifierEdit">
      <result name="input">notifierIrc.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="ircNotifierSave" class="ircNotifierEdit">
      <result name="input">notifierIrc.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="jabberNotifierEdit" class="jabberNotifierEdit">
      <result name="input">notifierJabber.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="jabberNotifierSave" class="jabberNotifierEdit">
      <result name="input">notifierJabber.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="msnNotifierEdit" class="msnNotifierEdit">
      <result name="input">notifierMsn.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="msnNotifierSave" class="msnNotifierEdit">
      <result name="input">notifierMsn.jsp</result>
      <result name="success" type="chain">projectView</result>
    </action>

    <action name="buildResults" class="buildResults">
      <result name="success">buildResults.jsp</result>
    </action>

    <action name="buildResult" class="buildResult">
      <result name="success">buildResult.jsp</result>
    </action>

    <action name="surefireReport" class="surefireReport">
      <result name="success">surefireReport.jsp</result>
    </action>

    <action name="workingCopy" class="workingCopy">
      <result name="success">workingCopy.jsp</result>
    </action>

    <!--
    * schedule actions
    -->
    <action name="schedules" class="schedule" method="summary">
      <result name="success">schedules.jsp</result>
    </action>

    <action name="schedule" class="schedule" method="input">
      <result name="success">editSchedule.jsp</result>
    </action>

    <action name="saveSchedule" class="schedule" method="save">
      <result name="success" type="chain">schedules</result>
    </action>

    <action name="removeSchedule" class="schedule" method="remove">
      <result name="success" type="chain">schedules</result>
    </action>


  </package>

  <package name="component" extends="default">
    <!--
    * component actions
    -->
    <action name="buildDefinitionSummary" class="buildDefinitionSummary" method="summarizeForProject">
      <result name="success">/components/buildDefinitionSummaryComponent.jsp</result>
      <result name="error">/components/failureComponent.jsp</result>
    </action>

    <action name="groupBuildDefinitionSummary" class="buildDefinitionSummary" method="summarizeForGroup">
      <result name="success">/components/buildDefinitionGroupSummaryComponent.jsp</result>
      <result name="error">/components/failureComponent.jsp</result>
    </action>

    <action name="projectSummary" class="summary">
      <result name="success">/components/projectSummaryComponent.jsp</result>
      <result name="error">/components/failureComponent.jsp</result>
    </action>
  </package>
</xwork>
