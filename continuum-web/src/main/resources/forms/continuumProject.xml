<form>
  <id>continuumProject</id>
  <key-expression>id</key-expression>
  <summary-collection-expression>getProjects()</summary-collection-expression>
  <source-role>org.apache.maven.continuum.Continuum</source-role>
  <type-expression>executorId</type-expression>
  <elements>
    <element>
      <id>project.name</id>
      <validators>
        <validator>
          <id>required</id>
          <error-message-key>project.name.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>name</expression>
    </element>
    <element>
      <id>project.scmUrl</id>
      <validators>
        <validator>
          <id>scm-url</id>
          <error-message-key>project.scmUrl.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>scmUrl</expression>
    </element>
    <element>
      <id>project.nagEmailAddress</id>
      <validators>
        <validator>
          <id>required</id>
          <error-message-key>project.nagEmailAddress.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>nagEmailAddress</expression>
    </element>
    <element>
      <id>project.version</id>
      <validators>
        <validator>
          <id>required</id>
          <error-message-key>project.version.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>version</expression>
    </element>
    <element>
      <id>project.type</id>
      <validators>
        <validator>
          <id>default</id>
          <error-message-key>project.type.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>builderId</expression>
      <immutable>true</immutable>
    </element>
    <element>
      <id>project.state</id>
      <validators>
        <validator>
          <id>default</id>
          <error-message-key>project.state.error</error-message-key>
        </validator>
      </validators>
      <type>text</type>
      <expression>state</expression>
      <immutable>true</immutable>
      <content-generator>continuum-state</content-generator>
    </element>
  </elements>

  <!-- View -->
  <view>
    <title-key>project.title</title-key>
  </view>

  <!-- Delete -->
  <delete>
    <title-key>project.title.delete</title-key>
    <view>Summary.vm</view>
    <action>deleteEntity</action>
    <expression>removeProject(#id)</expression>
  </delete>

  <!-- Summary -->

  <!--
   | 1 = new
   | 2 = ok
   | 3 = failed
   | 4 = error
   | 5 = signalled
   | 6 = building
   | 7 = checking out
   | 8 = updating
   -->

  <summary>
    <title-key>title.key</title-key>
    <summary-elements>
      <summary-element>
        <id>project.state</id>
      </summary-element>
      <summary-element>
        <id>project.name</id>
      </summary-element>
      <summary-element>
        <id>project.version</id>
      </summary-element>
    </summary-elements>
    <operations>
      <operation>
        <name>View</name>
        <action>View.vm/fid/$type$Project/id/$id$</action>
      </operation>
      <operation>
        <name>Results</name>
        <action>ProjectBuilds.vm/view/ProjectBuilds/id/$id$</action>
        <!--
         | Only show the result pages if there are builds to show and if the project is in a state
         | of ok, failed, error.
         -->
        <enable>getBuilds().size > 0 &amp;&amp; ( getState() == 2 || getState() == 3 || getState() == 4 )</enable>
      </operation>
      <operation>
        <name>Edit</name>
        <action>Edit.vm/fid/$type$Project/id/$id$</action>
      </operation>
      <operation>
        <name>Delete</name>
        <action>Delete.vm/fid/$type$Project/id/$id$</action>
        <!--
         | Allow deletion when the project is in a state of new, ok, failed, error.
         -->
        <enable>getState() == 1 || getState() == 2 || getState() == 3 || getState() == 4</enable>
      </operation>
      <operation>
        <name>Build</name>
        <action>Summary.vm/action/cam/cid/buildProject/id/$id$</action>
      </operation>
    </operations>
  </summary>
</form>
