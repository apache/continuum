<form>
  <id>addMavenOneProject</id>
  <source-role>org.apache.maven.continuum.Continuum</source-role>
  <attributes>
    <multipart>true</multipart>
  </attributes>
  <elements>
    <!--
    TODO: we're going to have to move away from dotted properties because it confuses OGNL i.e #project.foo
    isn't used as a string literal. OGNL looks for a project reference which will be null.
    -->
    <element>
      <id>m1PomUrl</id>
      <validators>
        <validator>
          <id>url</id>
          <error-message-key>url.error</error-message-key>
        </validator>
        <validator>
          <id>url-source</id>
          <error-message-key>urlSource.error</error-message-key>
        </validator>
      </validators>
      <expression>scmUrl</expression>
      <type>text</type>
    </element>
    <element>
      <id>m1PomFile</id>
      <validators>
      </validators>
      <expression>scmUrl</expression>
      <type>upload</type>
    </element>
  </elements>

  <!-- Add -->
  <add>
    <title-key>project.title.m1.add</title-key>
    <action>addMavenOneProject</action>
    <view>Summary.vm</view>
    <view-on-failure>AddMavenProject.vm</view-on-failure>
    <fid-on-failure>addMavenOneProject</fid-on-failure>    
    <expression>addMavenOneProject(#m1PomUrl, #m1PomFile)</expression>
  </add>

  <!-- Update -->
  <update>
    <title-key>project.title.update</title-key>
    <action>updateEntity</action>
    <view>Summary.vm</view>
    <view-on-failure>Edit.vm</view-on-failure>
    <expression>updateMavenOneProject(#entity)</expression>
  </update>

</form>
