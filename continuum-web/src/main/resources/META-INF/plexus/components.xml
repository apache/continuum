<component-set>
  <components>

    <!--
     |
     | Summit configuration
     |
     -->
    <component>
      <role>org.codehaus.plexus.summit.resolver.Resolver</role>
      <role-hint>classic</role-hint>
      <implementation>org.codehaus.plexus.summit.resolver.ClassicResolver</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.summit.renderer.Renderer</role>
          <role-hint>velocity</role-hint>
        </requirement>
      </requirements>
      <configuration>
        <initial-view>Summary.vm</initial-view>
        <default-view>Default.vm</default-view>
        <error-view>Error.vm</error-view>
        <result-messages-view>ResultMessages.vm</result-messages-view>
      </configuration>
    </component>

    <!--
     |
     | System components
     |
     |-->

    <component>
      <role>org.codehaus.plexus.summit.pipeline.Pipeline</role>
      <implementation>org.codehaus.plexus.summit.pipeline.SummitPipeline</implementation>
      <lifecycle-handler>plexus-configurable</lifecycle-handler>
      <configuration>
        <!-- This indicates that we do not wanted pages cached on the client side -->
        <nocache>true</nocache>
        <valves>
          <valve>org.apache.maven.continuum.web.pipeline.valve.InitializationCheckerValve</valve>
          <valve>org.apache.maven.continuum.web.pipeline.valve.LoginValve</valve>
          <!-- This is required because actions may need to put things in the context -->
          <valve>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextValve</valve>
          <valve>org.codehaus.plexus.summit.pipeline.valve.ActionValve</valve>
          <valve>org.codehaus.plexus.summit.pipeline.valve.DetermineTargetValve</valve>
          <valve>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextPopulatorValve</valve>
          <valve>org.codehaus.plexus.summit.pull.PullToolValve</valve>
          <valve>org.apache.maven.continuum.web.pipeline.valve.FormicaValve</valve>
          <valve>org.codehaus.plexus.summit.pipeline.valve.ResolverValve</valve>
          <valve>org.codehaus.plexus.summit.pipeline.valve.DisplayValve</valve>
        </valves>
      </configuration>
    </component>

    <!--
     |
     | Customized PullTools Service
     |
     -->

    <component>
      <role>org.codehaus.plexus.summit.pull.PullService</role>
      <implementation>org.codehaus.plexus.summit.pull.DefaultPullService</implementation>
      <configuration>
        <tools>
          <tool>
            <name>link</name>
            <role>linktool</role>
            <scope>request</scope>
          </tool>
          <tool>
            <name>page</name>
            <role>pagetool</role>
            <scope>request</scope>
          </tool>
          <tool>
            <name>css</name>
            <role>csstool</role>
            <scope>request</scope>
          </tool>
          <tool>
            <name>date</name>
            <role>datetool</role>
            <scope>global</scope>
          </tool>
          <tool>
            <name>i18n</name>
            <role>org.codehaus.plexus.i18n.I18N</role>
            <scope>global</scope>
          </tool>
          <tool>
            <name>state</name>
            <role>org.codehaus.plexus.formica.web.ContentGenerator</role>
            <role-hint>continuum-state</role-hint>
            <scope>global</scope>
          </tool>
          <tool>
            <name>trigger</name>
            <role>org.codehaus.plexus.formica.web.ContentGenerator</role>
            <role-hint>continuum-trigger</role-hint>
            <scope>global</scope>
          </tool>
          <tool>
            <name>workingCopy</name>
            <role>workingCopy</role>
            <scope>request</scope>
          </tool>
          <tool>
            <name>formtool</name>
            <role>org.apache.maven.continuum.web.tool.FormicaTool</role>
            <scope>global</scope>
          </tool>
          <tool>
            <name>formDataTool</name>
            <role>org.apache.maven.continuum.web.tool.FormDataTool</role>
            <scope>global</scope>
          </tool>
        </tools>
      </configuration>
    </component>

    <component>
      <role>datetool</role>
      <implementation>org.apache.maven.continuum.web.tool.DateTool</implementation>
      <configuration/>
    </component>

    <component>
      <role>csstool</role>
      <implementation>org.apache.maven.continuum.web.tool.CssTool</implementation>
      <instantiation-strategy>per-lookup</instantiation-strategy>
      <configuration/>
    </component>

    <component>
      <role>org.apache.maven.continuum.web.tool.FormDataTool</role>
      <implementation>org.apache.maven.continuum.web.tool.FormDataTool</implementation>
      <configuration/>
    </component>

    <component>
      <role>org.apache.maven.continuum.web.tool.FormicaTool</role>
      <implementation>org.apache.maven.continuum.web.tool.FormicaTool</implementation>
      <instantiation-strategy>per-lookup</instantiation-strategy>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.formica.FormManager</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>workingCopy</role>
      <implementation>org.apache.maven.continuum.web.tool.WorkingCopyContentGenerator</implementation>
    </component>

    <!--
     |
     | Valves
     |
     |-->

    <component>
      <role>org.apache.maven.continuum.web.context.ViewContextPopulator</role>
      <implementation>org.apache.maven.continuum.web.context.DefaultViewContextPopulator</implementation>
      <configuration>
        <views>
          <!--
           |
           | Project View
           |
           -->
          <view>
            <id>View</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProjectWithAllDetails(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | Working Copy
           |
           -->
          <view>
            <id>WorkingCopy</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | Project Builds
           |
           -->
          <view>
            <id>ProjectBuilds</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
              <scalar>
                <id>builds</id>
                <expression>getBuildResultsForProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>ProjectBuild</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
              <scalar>
                <id>build</id>
                <expression>getBuildResult(#buildId)</expression>
              </scalar>
              <scalar>
                <id>output</id>
                <expression>getBuildOutput(#id,#buildId)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | Project Builds Definitions
           |
           -->
          <view>
            <id>BuildDefinition</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
              <scalar>
                <id>buildDefinition</id>
                <expression>getBuildDefinition(#id,#buildDefinitionId)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | Notification
           |
           -->
          <view>
            <id>ProjectNotifiers</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>SelectNotifier</id>
            <scalars>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>ViewIrcNotifier</id>
            <scalars>
              <scalar>
                <id>notifier</id>
                <expression>getNotifier(#id,#notifierId)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>ViewMailNotifier</id>
            <scalars>
              <scalar>
                <id>notifier</id>
                <expression>getNotifier(#id,#notifierId)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>EditIrcNotifier</id>
            <scalars>
              <scalar>
                <id>notifier</id>
                <expression>getNotifier(#id,#notifierId)</expression>
              </scalar>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <view>
            <id>EditMailNotifier</id>
            <scalars>
              <scalar>
                <id>notifier</id>
                <expression>getNotifier(#id,#notifierId)</expression>
              </scalar>
              <scalar>
                <id>project</id>
                <expression>getProject(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | User Group
           |
           -->
          <view>
            <id>UserGroup</id>
            <scalars>
              <scalar>
                <id>userGroup</id>
                <expression>getUserGroup(#id)</expression>
              </scalar>
            </scalars>
          </view>
          <!--
           |
           | User
           |
           -->
          <view>
            <id>User</id>
            <scalars>
              <scalar>
                <id>user</id>
                <expression>getUser(#id)</expression>
              </scalar>
            </scalars>
          </view>
        </views>
      </configuration>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextPopulatorValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextPopulatorValve</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.web.context.ViewContextPopulator</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.continuum.Continuum</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.ContinuumViewContextValve</implementation>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.FormicaValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.FormicaValve</implementation>
      <configuration>
        <default-form-id>continuumProject</default-form-id>
      </configuration>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.web.tool.FormicaTool</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.InitializationCheckerValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.InitializationCheckerValve</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.configuration.ConfigurationService</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.LoginValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.LoginValve</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.configuration.ConfigurationService</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.summit.pipeline.valve.Valve</role>
      <role-hint>org.apache.maven.continuum.web.pipeline.valve.ActionValve</role-hint>
      <implementation>org.apache.maven.continuum.web.pipeline.valve.ActionValve</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.web.action.ActionManager</role>
        </requirement>
      </requirements>
    </component>

    <!--
     |
     | Actions
     |
     |-->

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>initializationChecker</role-hint>
      <implementation>org.apache.maven.continuum.web.action.InitializationChecker</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.configuration.ConfigurationService</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.continuum.store.ContinuumStore</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>login</role-hint>
      <implementation>org.apache.maven.continuum.web.action.Login</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.continuum.store.ContinuumStore</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>logout</role-hint>
      <implementation>org.apache.maven.continuum.web.action.Logout</implementation>
    </component>

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>addMavenTwoProject</role-hint>
      <implementation>org.apache.maven.continuum.web.action.AddMavenTwoProject</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.formica.FormManager</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>addMavenOneProject</role-hint>
      <implementation>org.apache.maven.continuum.web.action.AddMavenOneProject</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.formica.FormManager</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.action.Action</role>
      <role-hint>cam</role-hint>
      <implementation>org.apache.maven.continuum.web.action.CallApplicationModel</implementation>
      <configuration>
        <application-role>org.apache.maven.continuum.Continuum</application-role>
        <calls>
          <call>
            <cid>buildProject</cid>
            <expression>buildProject(#id)</expression>
          </call>
          <call>
            <cid>buildAllProjects</cid>
            <expression>buildProjects()</expression>
          </call>
          <call>
            <cid>checkoutProject</cid>
            <expression>checkoutProject(#id)</expression>
          </call>
          <!--
           |
           | Notifiers
           |
           -->
          <call>
            <cid>deleteNotifier</cid>
            <expression>removeNotifier(#id,#notifierId)</expression>
          </call>
          <call>
            <cid>updateNotifier</cid>
            <expression>updateNotifier(#id,#notifierId,#parameters)</expression>
          </call>
          <!--
           |
           | Build Definition
           |
           -->
          <call>
            <cid>addBuildDefinition</cid>
            <expression>addBuildDefinition(#id,#parameters)</expression>
          </call>
          <call>
            <cid>deleteBuildDefinition</cid>
            <expression>removeBuildDefinition(#id,#buildDefinitionId)</expression>
          </call>
          <call>
            <cid>updateBuildDefinition</cid>
            <expression>updateBuildDefinition(#id,#buildDefinitionId,#parameters)</expression>
          </call>
          <!--
           |
           | User Group
           |
           -->
          <call>
            <cid>addUserGroup</cid>
            <expression>addUserGroup(#parameters)</expression>
          </call>
          <call>
            <cid>deleteUserGroup</cid>
            <expression>removeUserGroup(#id)</expression>
          </call>
          <call>
            <cid>updateUserGroup</cid>
            <expression>updateUserGroup(#id,#parameters)</expression>
          </call>
          <!--
           |
           | User
           |
           -->
          <call>
            <cid>addUser</cid>
            <expression>addUser(#parameters)</expression>
          </call>
          <call>
            <cid>deleteUser</cid>
            <expression>removeUser(#id)</expression>
          </call>
          <call>
            <cid>updateUser</cid>
            <expression>updateUser(#id,#parameters)</expression>
          </call>
          <!--
           |
           | Configuration
           |
           -->
          <call>
            <cid>updateConfiguration</cid>
            <expression>updateConfiguration(#parameters)</expression>
          </call>
        </calls>
      </configuration>
    </component>

    <!--
     |
     | Validators
     |
     |-->

    <component>
      <role>org.codehaus.plexus.formica.validation.Validator</role>
      <role-hint>scm-url</role-hint>
      <implementation>org.apache.maven.continuum.web.validation.ScmUrlValidator</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.scm.manager.ScmManager</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.formica.validation.Validator</role>
      <role-hint>safe-path</role-hint>
      <implementation>org.apache.maven.continuum.web.validation.SafePathValidator</implementation>
    </component>

    <component>
      <role>org.codehaus.plexus.formica.validation.Validator</role>
      <role-hint>cron</role-hint>
      <implementation>org.apache.maven.continuum.web.validation.CronExpressionValidator</implementation>
    </component>

    <!--
     |
     | Content Generators
     |
     |-->

    <component>
      <role>org.codehaus.plexus.formica.web.ContentGenerator</role>
      <role-hint>continuum-state</role-hint>
      <implementation>org.apache.maven.continuum.web.tool.ContinuumStateContentGenerator</implementation>
    </component>

    <component>
      <role>org.codehaus.plexus.formica.web.ContentGenerator</role>
      <role-hint>continuum-trigger</role-hint>
      <implementation>org.apache.maven.continuum.web.tool.ContinuumTriggerContentGenerator</implementation>
    </component>

  </components>
</component-set>
