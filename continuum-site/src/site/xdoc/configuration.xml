<document>
  <properties>
    <title>Configuring Continuum</title>
    <author email="trygvis@apache.org">Trygve Laugs&#248;l</author>
  </properties>
  <body>
    <section name="Configuring Continuum">
      <p>
        The configuration file for Continuum is inside the Plexus runtime under
        <code>apps/continuum/conf/application.xml</code>. <i>NOTE</i>: You have to start and stop the application at
        least once before configuring Continuum. This is required because the application container has to unpack the
        application.
      </p>
      <subsection name="Mail Notification">
        There are three components used by the mail notification system in Continuum:
        <ul>
          <li>
            The Mail notifier itself. There are three configurable properties:
            <ul>
              <li>
                <code>from-mailbox</code> and <code>from-name</code>: The mailbox and name that will be set as the
                <code>From</code> header for all mails sent. It's it important to ensure that the mailbox is a
                real account as a lot of SMTP server check that the mailbox actually exists before accepting the
                mail. If the from mailbox is empty or not specified the nag email address of the project will be
                used as the from mailbox.
              </li>
              <li>
                <code>timestamp-format</code>: This is the format string that is used to format the dates in the mails.
              </li>
            </ul>
          </li>
          <li>
            The recipient source. This is the component that decides who should receive the email. The only thing
            that can be configured here is a address that will be used as the recipient for all email sent. This
            configuration is mostly useful for people who want to make sure all email is sent to a specific account
            during testing or development.
          </li>
          <li>
            The mail sender is the component that will send the email to the SMTP server. The two properties that can be configured are:
            <ul>
              <li>
                <code>smtp-host</code>: The SMTP host. Make sure that this host will accept mails to and possibly
                from the addresses configured for each project.
              </li>
              <li>
                <code>smtp-port</code>: The port to use on the SMTP host.
              </li>
            </ul>
          </li>
        </ul>
      </subsection>
      <subsection name="Alarm Trigger">
        <p>
          The alarm trigger will trigger a build of all the projects on a timed interval.
          <ul>
            <li>
              <code>interval</code>: The number of seconds between each round of scheduling.
            </li>
            <li>
              <code>delay</code>: The number of seconds to wait before starting the first round of scheduling post startup.
            </li>
          </ul>
        </p>
      </subsection>
      <subsection name="Jetty Configuration">
        Jetty is configured in a special way as it's a service, not a component. The only thing that should be
        changed in the Jetty configuration is the port and that is done by changing the <code>port</code> tag in
        the <code>services</code> section.
      </subsection>
      <subsection name="Socket Listeners">
        There are two services listening on sockets that can be configured:
        <ul>
          <li>
            <code>url-registrar-server</code>: This registrar will read POM URLs for the Maven 1.x and 2.x project builders.
          </li>
          <li>
            <code>simple-socket-trigger-server</code>: This registrar will read project IDs off the wire and schedule a build for that project.
          </li>
        </ul>
        <!-- TODO: finish
        The only
        -->
      </subsection>
    </section>
  </body>
</document>
