<model>
  <id>continuum</id>
  <name>Continuum</name>
  <description>Continuum's object model.</description>
  <defaults>
    <default>
      <key>package</key>
      <value>org.apache.maven.continuum.project</value>
    </default>
  </defaults>

  <!--
   |
   | Projects
   |
   |-->
  <classes>
    <class rootElement="true" stash.storable="true" java.abstract="true"><!-- -->
      <name>ContinuumProject</name>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>id</name>
          <required>true</required>
          <identifier>true</identifier>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>name</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>scmUrl</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>version</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>workingDirectory</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field stash.storable="false">
          <name>state</name>
          <version>1.0.0</version>
          <type>int</type>
        </field>
        <field>
          <name>executorId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>latestBuildId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>previousBuildId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>        
        <field>
          <name>buildNumber</name>
          <version>1.0.0</version>
          <type>int</type>
        </field>        
        <field>
          <name>builds</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ContinuumBuild</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
        <field>
          <name>scmResult</name>
          <version>1.0.0</version>
          <association>
            <type>ScmResult</type>
          </association>
        </field>
        <field>
          <name>checkOutErrorMessage</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>checkOutErrorException</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>mailType</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <!-- TODO: Move to the executor configuration. -->
        <!-- TODO: Uh, oh, and rename FooProject to FooExecutorConfiguration -->
        <field>
          <name>commandLineArguments</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>url</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>artifactId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>groupId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>testOutputDirectory</name>
          <version>1.0.0</version>
          <description><![CDATA[
            The directory where test output is generated. This value is relative to the project's
            working directory and is typically contained somewhere within the working directory. In
            m2's case it would be target/surefire-reports.
          ]]></description>
          <type>String</type>
        </field>
        <field>
          <name>developers</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ContinuumDeveloper</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
        <field>
          <name>notifiers</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ContinuumNotifier</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
        <field>
          <name>dependencies</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ContinuumDependency</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>ContinuumNotifier</name>
      <version>1.0.0</version>
      <description>
        Configures one method for notifying users/developers when a build breaks.
      </description>
      <fields>
        <field>
          <name>type</name>
          <version>1.0.0</version>
          <defaultValue>mail</defaultValue>
          <type>String</type>
          <description>The mechanism used to deliver notifications.</description>
        </field>
        <field>
          <name>configuration</name>
          <version>1.0.0</version>
          <description>Extended configuration specific to this notifier goes here.</description>
          <type>Map</type>
          <association xml.mapStyle="inline" stash.part="true" stash.keyType="java.lang.String">
            <type>String</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>ContinuumDeveloper</name>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>id</name>
          <identifier>true</identifier>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>name</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>email</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>
    
    <class stash.storable="true">
      <name>ContinuumDependency</name>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>groupId</name>
          <identifier>true</identifier>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>artifactId</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>version</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>MavenTwoProject</name>
      <version>1.0.0</version>
      <superClass>ContinuumProject</superClass>
      <fields>
        <field>
          <name>goals</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>MavenOneProject</name>
      <version>1.0.0</version>
      <superClass>ContinuumProject</superClass>
      <fields>
        <field>
          <name>goals</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>AntProject</name>
      <version>1.0.0</version>
      <superClass>ContinuumProject</superClass>
      <fields>
        <field>
          <name>executable</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>targets</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>

    <class stash.storable="true">
      <name>ShellProject</name>
      <version>1.0.0</version>
      <superClass>ContinuumProject</superClass>
      <fields>
        <field>
          <name>executable</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>

    <!--
     |
     | Builds
     |
     -->
    <class stash.storable="true">
      <name>ContinuumBuild</name>
      <version>1.0.0</version>
      <description><![CDATA[
        This class is a single continuum build.
        It has a reference to a {@link BuilderBuildResult} which contains
        any builder specific objects/variables.</description>
      ]]></description>
      <fields>
        <field>
          <name>project</name>
          <version>1.0.0</version>
          <required>true</required>
          <association stash.part="false">
            <type>ContinuumProject</type>
          </association>
        </field>
        <field>
          <name>id</name>
          <identifier>true</identifier>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>state</name>
          <version>1.0.0</version>
          <type>int</type>
          <!--
          <association>
            <type>BuildResultState</type>
          </association>
          -->
        </field>
        <field>
          <name>forced</name>
          <version>1.0.0</version>
          <type>boolean</type>
        </field>
        <field>
          <name>startTime</name>
          <version>1.0.0</version>
          <type>long</type>
        </field>
        <field>
          <name>endTime</name>
          <version>1.0.0</version>
          <type>long</type>
        </field>
        <field stash.maxSize="8000">
          <name>error</name>
          <version>1.0.0</version>
          <type>String</type>
          <!--
          <association>
            <type>java.lang.Throwable</type>
          </association>
          -->
        </field>

        <field>
          <name>success</name>
          <version>1.0.0</version>
          <type>boolean</type>
        </field>
        <field stash.maxSize="8000">
          <name>standardOutput</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field stash.maxSize="8000">
          <name>standardError</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>exitCode</name>
          <version>1.0.0</version>
          <type>int</type>
        </field>
        <field>
          <name>scmResult</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ScmResult</type>
          </association>
        </field>
      </fields>
    </class>

    <!--
     |
     | Scm Result
     |
     |-->
    <class stash.storable="true">
      <name>ScmResult</name>
      <packageName>org.apache.maven.continuum.scm</packageName>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>success</name>
          <version>1.0.0</version>
          <type>boolean</type>
        </field>
        <field>
          <name>providerMessage</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>commandOutput</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>files</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ScmFile</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
        <field>
          <name>changes</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ChangeSet</type>
            <multiplicity>*</multiplicity>
          </association>
        </field>
      </fields>
    </class>

    <class>
      <name>ScmFile</name>
      <packageName>org.apache.maven.continuum.scm</packageName>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>path</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <!-- TODO: Use some form of enumeration
                <field>
                  <name>status</name>
                  <version>1.0.0</version>
                  <type>ScmFileStatus</type>
                </field>
        -->
      </fields>
    </class>

    <class>
      <name>ChangeSet</name>
      <packageName>org.apache.maven.continuum.scm</packageName>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>author</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>comment</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>date</name>
          <version>1.0.0</version>
          <type>Date</type>
        </field>
        <field>
          <name>file</name>
          <version>1.0.0</version>
          <association stash.part="true">
            <type>ChangeFile</type>
          </association>
        </field>
      </fields>
    </class>

    <class>
      <name>ChangeFile</name>
      <packageName>org.apache.maven.continuum.scm</packageName>
      <version>1.0.0</version>
      <fields>
        <field>
          <name>name</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
        <field>
          <name>revision</name>
          <version>1.0.0</version>
          <type>String</type>
        </field>
      </fields>
    </class>
  </classes>
</model>
